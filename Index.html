<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie Shooter - Demo PC & Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom, #0a0a0a, #1a1a2e);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #4a0e0e;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #ff3c3c;
            font-size: 2.8rem;
            text-shadow: 0 0 10px rgba(255, 60, 60, 0.7);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #ccc;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .game-description {
            background-color: rgba(30, 30, 46, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            line-height: 1.6;
            border-left: 5px solid #ff3c3c;
        }
        
        .demo-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .demo-btn {
            padding: 15px 30px;
            background: #4a0e0e;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .demo-btn:hover, .demo-btn.active {
            background: #ff3c3c;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 60, 60, 0.4);
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 500px;
            margin: 0 auto 30px;
            border: 3px solid #4a0e0e;
            border-radius: 10px;
            overflow: hidden;
            background: #111;
        }
        
        #gameCanvas {
            display: block;
            background: #0a0a0a;
        }
        
        .mobile-controls {
            display: none;
            position: absolute;
            bottom: 20px;
            width: 100%;
            justify-content: space-between;
            padding: 0 20px;
        }
        
        .mobile-joystick {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .joystick-btn {
            width: 70px;
            height: 70px;
            background: rgba(255, 60, 60, 0.8);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            border: 2px solid white;
        }
        
        .joystick-btn:active {
            transform: scale(0.95);
            background: rgba(255, 100, 100, 0.9);
        }
        
        .fire-btn {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ff3c3c, #8b0000);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            user-select: none;
            border: 3px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
        }
        
        .fire-btn:active {
            transform: scale(0.95);
            background: radial-gradient(circle, #ff5c5c, #a30000);
        }
        
        .game-ui {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.5rem;
        }
        
        .hearts {
            display: flex;
            gap: 10px;
        }
        
        .heart {
            color: #ff3c3c;
            font-size: 2rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .score {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid #ff3c3c;
        }
        
        .ammo {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid #ff3c3c;
            font-size: 1.5rem;
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .game-over h2 {
            font-size: 3.5rem;
            color: #ff3c3c;
            margin-bottom: 20px;
        }
        
        .restart-btn {
            padding: 15px 40px;
            background: #ff3c3c;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.5rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .restart-btn:hover {
            background: #ff5c5c;
            transform: scale(1.05);
        }
        
        .instructions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .instruction-box {
            background: rgba(30, 30, 46, 0.8);
            padding: 20px;
            border-radius: 10px;
        }
        
        .instruction-box h3 {
            color: #ff3c3c;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .instruction-box ul {
            padding-left: 20px;
        }
        
        .instruction-box li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .game-container {
                height: 400px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .demo-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .demo-btn {
                width: 80%;
            }
            
            .mobile-controls {
                display: flex;
            }
            
            .instruction-box {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .game-container {
                height: 350px;
            }
            
            .joystick-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .fire-btn {
                width: 80px;
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ZOMBIE SHOOTER</h1>
            <p class="subtitle">Tembak semua zombie sebelum mereka mendekatimu!</p>
        </header>
        
        <div class="game-description">
            <p>Game zombie shooter ini memiliki dua mode demo: PC dan Mobile. Pada mode PC, gunakan mouse untuk menembak dan tombol panah untuk bergerak. Pada mode Mobile, gunakan joystick virtual untuk bergerak dan tombol tembak untuk menembak zombie. Jaga nyawa (heart) Anda dan kumpulkan skor tertinggi!</p>
        </div>
        
        <div class="demo-selector">
            <button class="demo-btn active" id="pcDemoBtn">
                <i class="fas fa-desktop"></i> Demo PC
            </button>
            <button class="demo-btn" id="mobileDemoBtn">
                <i class="fas fa-mobile-alt"></i> Demo Mobile
            </button>
        </div>
        
        <div class="game-container">
            <canvas id="gameCanvas" width="900" height="500"></canvas>
            
            <div class="game-ui">
                <div class="hearts" id="heartsContainer">
                    <i class="fas fa-heart heart"></i>
                    <i class="fas fa-heart heart"></i>
                    <i class="fas fa-heart heart"></i>
                </div>
                <div class="score">Skor: <span id="scoreValue">0</span></div>
            </div>
            
            <div class="ammo">Peluru: <span id="ammoValue">30</span></div>
            
            <div class="mobile-controls" id="mobileControls">
                <div class="mobile-joystick">
                    <div class="joystick-btn" id="upBtn">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="joystick-btn" id="downBtn">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                </div>
                
                <div class="fire-btn" id="fireBtnMobile">
                    <i class="fas fa-crosshairs"></i>
                </div>
            </div>
            
            <div class="game-over" id="gameOverScreen">
                <h2>GAME OVER</h2>
                <p>Skor Akhir: <span id="finalScore">0</span></p>
                <button class="restart-btn" id="restartBtn">Main Lagi</button>
            </div>
        </div>
        
        <div class="instructions">
            <div class="instruction-box">
                <h3>Kontrol PC</h3>
                <ul>
                    <li>Gunakan <strong>tombol panah atas/bawah</strong> untuk bergerak</li>
                    <li><strong>Klik kiri mouse</strong> untuk menembak zombie</li>
                    <li><strong>R untuk reload</strong> ketika peluru habis</li>
                    <li>Jaga hati Anda, setiap zombie yang menyentuh Anda mengurangi 1 nyawa</li>
                </ul>
            </div>
            
            <div class="instruction-box">
                <h3>Kontrol Mobile</h3>
                <ul>
                    <li>Gunakan <strong>joystick panah atas/bawah</strong> untuk bergerak</li>
                    <li>Tekan <strong>tombol tembak</strong> untuk menembak zombie</li>
                    <li>Tombol <strong>reload</strong> akan muncul ketika peluru hampir habis</li>
                    <li>Hindari zombie untuk menjaga nyawa Anda</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>Zombie Shooter Game &copy; 2023 | Dibuat dengan HTML5 Canvas</p>
        </div>
    </div>

    <script>
        // Inisialisasi elemen game
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const pcDemoBtn = document.getElementById('pcDemoBtn');
        const mobileDemoBtn = document.getElementById('mobileDemoBtn');
        const mobileControls = document.getElementById('mobileControls');
        const upBtn = document.getElementById('upBtn');
        const downBtn = document.getElementById('downBtn');
        const fireBtnMobile = document.getElementById('fireBtnMobile');
        const heartsContainer = document.getElementById('heartsContainer');
        const scoreValue = document.getElementById('scoreValue');
        const ammoValue = document.getElementById('ammoValue');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const finalScore = document.getElementById('finalScore');
        const restartBtn = document.getElementById('restartBtn');
        
        // Variabel game
        let player = {
            x: 100,
            y: canvas.height / 2,
            width: 40,
            height: 60,
            speed: 5,
            hearts: 3,
            score: 0,
            ammo: 30,
            isMovingUp: false,
            isMovingDown: false
        };
        
        let zombies = [];
        let bullets = [];
        let gameRunning = true;
        let isMobileMode = false;
        let zombieSpawnInterval;
        let lastShotTime = 0;
        const shotCooldown = 300; // ms
        const zombieSpeed = 1.5;
        
        // Inisialisasi game
        function initGame() {
            // Reset player
            player = {
                x: 100,
                y: canvas.height / 2,
                width: 40,
                height: 60,
                speed: 5,
                hearts: 3,
                score: 0,
                ammo: 30,
                isMovingUp: false,
                isMovingDown: false
            };
            
            // Reset arrays
            zombies = [];
            bullets = [];
            
            // Reset UI
            updateHearts();
            scoreValue.textContent = player.score;
            ammoValue.textContent = player.ammo;
            
            // Hide game over screen
            gameOverScreen.style.display = 'none';
            gameRunning = true;
            
            // Clear existing intervals
            if (zombieSpawnInterval) {
                clearInterval(zombieSpawnInterval);
            }
            
            // Start zombie spawning
            zombieSpawnInterval = setInterval(spawnZombie, 1500);
            
            // Start game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Update tampilan hati
        function updateHearts() {
            heartsContainer.innerHTML = '';
            for (let i = 0; i < player.hearts; i++) {
                const heart = document.createElement('i');
                heart.className = 'fas fa-heart heart';
                heartsContainer.appendChild(heart);
            }
        }
        
        // Spawn zombie baru
        function spawnZombie() {
            const zombieY = Math.random() * (canvas.height - 60);
            zombies.push({
                x: canvas.width,
                y: zombieY,
                width: 40,
                height: 60,
                speed: zombieSpeed + Math.random() * 1.5
            });
        }
        
        // Gambar pemain
        function drawPlayer() {
            // Tubuh
            ctx.fillStyle = '#4CAF50';
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Kepala
            ctx.fillStyle = '#8BC34A';
            ctx.beginPath();
            ctx.arc(player.x + player.width/2, player.y - 10, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Senjata
            ctx.fillStyle = '#795548';
            ctx.fillRect(player.x + player.width, player.y + 20, 30, 10);
            
            // Tangan (membawa senjata)
            ctx.fillStyle = '#8BC34A';
            ctx.fillRect(player.x + player.width - 5, player.y + 15, 10, 20);
        }
        
        // Gambar zombie
        function drawZombies() {
            zombies.forEach(zombie => {
                // Tubuh zombie
                ctx.fillStyle = '#4a0e0e';
                ctx.fillRect(zombie.x, zombie.y, zombie.width, zombie.height);
                
                // Kepala zombie
                ctx.fillStyle = '#6a1b1b';
                ctx.beginPath();
                ctx.arc(zombie.x + zombie.width/2, zombie.y - 10, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Mata zombie (bercahaya)
                ctx.fillStyle = '#00ff00';
                ctx.beginPath();
                ctx.arc(zombie.x + zombie.width/2 - 5, zombie.y - 10, 3, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(zombie.x + zombie.width/2 + 5, zombie.y - 10, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Lengan zombie
                ctx.fillStyle = '#4a0e0e';
                ctx.fillRect(zombie.x - 5, zombie.y + 10, 5, 15);
                ctx.fillRect(zombie.x + zombie.width, zombie.y + 10, 5, 15);
            });
        }
        
        // Gambar peluru
        function drawBullets() {
            bullets.forEach(bullet => {
                ctx.fillStyle = '#FFD700';
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Efek cahaya peluru
                ctx.fillStyle = 'rgba(255, 215, 0, 0.3)';
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 8, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        // Update posisi semua objek
        function updatePositions() {
            // Update posisi pemain
            if (player.isMovingUp && player.y > 0) {
                player.y -= player.speed;
            }
            if (player.isMovingDown && player.y + player.height < canvas.height) {
                player.y += player.speed;
            }
            
            // Update posisi zombie
            zombies.forEach(zombie => {
                zombie.x -= zombie.speed;
                
                // Deteksi tabrakan dengan pemain
                if (zombie.x < player.x + player.width &&
                    zombie.x + zombie.width > player.x &&
                    zombie.y < player.y + player.height &&
                    zombie.y + zombie.height > player.y) {
                    
                    // Kurangi nyawa
                    player.hearts--;
                    updateHearts();
                    
                    // Hapus zombie
                    const index = zombies.indexOf(zombie);
                    zombies.splice(index, 1);
                    
                    // Cek game over
                    if (player.hearts <= 0) {
                        gameOver();
                    }
                }
                
                // Hapus zombie yang sudah melewati batas kiri
                if (zombie.x + zombie.width < 0) {
                    const index = zombies.indexOf(zombie);
                    zombies.splice(index, 1);
                }
            });
            
            // Update posisi peluru
            bullets.forEach((bullet, index) => {
                bullet.x += 10;
                
                // Deteksi tabrakan peluru dengan zombie
                zombies.forEach((zombie, zombieIndex) => {
                    if (bullet.x > zombie.x &&
                        bullet.x < zombie.x + zombie.width &&
                        bullet.y > zombie.y &&
                        bullet.y < zombie.y + zombie.height) {
                        
                        // Tambah skor
                        player.score += 10;
                        scoreValue.textContent = player.score;
                        
                        // Hapus peluru dan zombie
                        bullets.splice(index, 1);
                        zombies.splice(zombieIndex, 1);
                    }
                });
                
                // Hapus peluru yang sudah melewati batas kanan
                if (bullet.x > canvas.width) {
                    bullets.splice(index, 1);
                }
            });
        }
        
        // Tembak peluru
        function shoot() {
            const currentTime = Date.now();
            
            // Cooldown dan ammo check
            if (currentTime - lastShotTime > shotCooldown && player.ammo > 0) {
                bullets.push({
                    x: player.x + player.width + 30,
                    y: player.y + player.height / 2
                });
                
                player.ammo--;
                ammoValue.textContent = player.ammo;
                lastShotTime = currentTime;
                
                // Cek jika ammo hampir habis
                if (player.ammo <= 5) {
                    ammoValue.style.color = '#ff3c3c';
                }
                
                // Jika ammo habis, tampilkan notifikasi
                if (player.ammo <= 0) {
                    if (isMobileMode) {
                        // Tambah tombol reload di mobile
                        fireBtnMobile.innerHTML = '<i class="fas fa-redo"></i>';
                        fireBtnMobile.onclick = reloadAmmo;
                    }
                }
            }
        }
        
        // Reload ammo
        function reloadAmmo() {
            player.ammo = 30;
            ammoValue.textContent = player.ammo;
            ammoValue.style.color = '#fff';
            
            if (isMobileMode) {
                // Kembalikan tombol tembak
                fireBtnMobile.innerHTML = '<i class="fas fa-crosshairs"></i>';
                fireBtnMobile.onclick = shoot;
            }
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            clearInterval(zombieSpawnInterval);
            finalScore.textContent = player.score;
            gameOverScreen.style.display = 'flex';
        }
        
        // Game loop utama
        function gameLoop() {
            if (!gameRunning) return;
            
            // Bersihkan canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Gambar latar belakang
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Gambar grid latar belakang
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            
            // Grid vertikal
            for (let x = 0; x < canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Grid horizontal
            for (let y = 0; y < canvas.height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // Update dan gambar semua objek
            updatePositions();
            drawPlayer();
            drawZombies();
            drawBullets();
            
            // Lanjutkan game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners untuk PC
        document.addEventListener('keydown', (e) => {
            if (!isMobileMode) {
                if (e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') {
                    player.isMovingUp = true;
                }
                if (e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') {
                    player.isMovingDown = true;
                }
                if (e.key === 'r' || e.key === 'R') {
                    reloadAmmo();
                }
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (!isMobileMode) {
                if (e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') {
                    player.isMovingUp = false;
                }
                if (e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') {
                    player.isMovingDown = false;
                }
            }
        });
        
        canvas.addEventListener('click', (e) => {
            if (!isMobileMode && gameRunning) {
                shoot();
            }
        });
        
        // Event listeners untuk mobile
        upBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (isMobileMode) player.isMovingUp = true;
        });
        
        upBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (isMobileMode) player.isMovingUp = false;
        });
        
        downBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (isMobileMode) player.isMovingDown = true;
        });
        
        downBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (isMobileMode) player.isMovingDown = false;
        });
        
        fireBtnMobile.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (isMobileMode && gameRunning) {
                if (player.ammo > 0) {
                    shoot();
                } else {
                    reloadAmmo();
                }
            }
        });
        
        // Event listeners untuk tombol demo
        pcDemoBtn.addEventListener('click', () => {
            isMobileMode = false;
            mobileControls.style.display = 'none';
            pcDemoBtn.classList.add('active');
            mobileDemoBtn.classList.remove('active');
            initGame();
        });
        
        mobileDemoBtn.addEventListener('click', () => {
            isMobileMode = true;
            mobileControls.style.display = 'flex';
            mobileDemoBtn.classList.add('active');
            pcDemoBtn.classList.remove('active');
            initGame();
        });
        
        // Event listener untuk restart
        restartBtn.addEventListener('click', initGame);
        
        // Event listeners untuk mouse pada tombol mobile (untuk pengujian di PC)
        upBtn.addEventListener('mousedown', () => {
            if (isMobileMode) player.isMovingUp = true;
        });
        
        upBtn.addEventListener('mouseup', () => {
            if (isMobileMode) player.isMovingUp = false;
        });
        
        downBtn.addEventListener('mousedown', () => {
            if (isMobileMode) player.isMovingDown = true;
        });
        
        downBtn.addEventListener('mouseup', () => {
            if (isMobileMode) player.isMovingDown = false;
        });
        
        fireBtnMobile.addEventListener('mousedown', () => {
            if (isMobileMode && gameRunning) {
                if (player.ammo > 0) {
                    shoot();
                } else {
                    reloadAmmo();
                }
            }
        });
        
        // Inisialisasi game pertama kali
        initGame();
    </script>
</body>
</html>
